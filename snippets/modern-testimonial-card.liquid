{%- comment -%}
  Modern Testimonial Card Snippet
  ===============================
  Renders a single testimonial card with stars, text, and author.

  Usage: {% render 'modern-testimonial-card', block: block %}
{%- endcomment -%}

<div class="modern-testimonial-card">
  <svg class="modern-testimonial-quote-icon" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10H14.017zM0 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151C7.546 6.068 5.983 8.789 5.983 11h4v10H0z"/></svg>

  {%- comment -%} Stars {%- endcomment -%}
  <div class="modern-testimonial-stars" role="img" aria-label="{{ block.settings.rating }} out of 5 stars">
    {%- for i in (1..5) -%}
      {%- if i <= block.settings.rating -%}
        <svg class="modern-testimonial-star" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
      {%- else -%}
        <svg class="modern-testimonial-star modern-testimonial-star--empty" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
      {%- endif -%}
    {%- endfor -%}
  </div>

  <p class="modern-testimonial-card__text">"{{ block.settings.text | escape }}"</p>

  <div class="modern-testimonial-card__author">
    <div class="modern-testimonial-card__avatar">
      {%- if block.settings.author_image != blank -%}
        {{ block.settings.author_image | image_url: width: 96 | image_tag:
          alt: block.settings.author_name,
          widths: '48, 96',
          sizes: '48px',
          loading: 'lazy'
        }}
      {%- else -%}
        {{ block.settings.author_name | slice: 0, 1 | upcase }}
      {%- endif -%}
    </div>
    <div>
      <p class="modern-testimonial-card__name">{{ block.settings.author_name | escape }}</p>
      {%- if block.settings.author_role != blank -%}
        <p class="modern-testimonial-card__role">{{ block.settings.author_role | escape }}</p>
      {%- endif -%}
    </div>
  </div>
</div>
