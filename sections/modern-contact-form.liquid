{%- comment -%}
  Modern Contact Form
  ===================
  Contact page with animated form, info cards with icons, and social links.
{%- endcomment -%}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }
  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  .modern-contact {
    display: grid;
    gap: var(--space-3xl);
  }
  @media screen and (min-width: 990px) {
    .modern-contact {
      grid-template-columns: 1fr 1fr;
    }
  }

  .modern-contact__form-section h2 {
    font-size: var(--text-2xl);
    font-weight: 700;
    margin: 0 0 var(--space-xl);
    letter-spacing: var(--tracking-tight);
  }

  .modern-contact-form {
    display: grid;
    gap: var(--space-lg);
  }
  .modern-contact-form__row {
    display: grid;
    gap: var(--space-lg);
  }
  @media screen and (min-width: 750px) {
    .modern-contact-form__row--half {
      grid-template-columns: 1fr 1fr;
    }
  }

  .modern-input-group {
    position: relative;
  }
  .modern-input-group__input {
    width: 100%;
    padding: var(--space-lg) var(--space-md) var(--space-sm);
    border: 2px solid rgba(128,128,128,0.15);
    border-radius: var(--radius-md);
    font-size: var(--text-base);
    background: transparent;
    color: inherit;
    transition: border-color var(--duration-fast) var(--ease-out);
    font-family: inherit;
  }
  .modern-input-group__input:focus {
    outline: none;
    border-color: var(--color-button, #000);
  }
  .modern-input-group__label {
    position: absolute;
    left: var(--space-md);
    top: 50%;
    transform: translateY(-50%);
    font-size: var(--text-base);
    opacity: 0.5;
    pointer-events: none;
    transition: all var(--duration-fast) var(--ease-out);
  }
  .modern-input-group__input:focus ~ .modern-input-group__label,
  .modern-input-group__input:not(:placeholder-shown) ~ .modern-input-group__label {
    top: 10px;
    transform: translateY(0);
    font-size: var(--text-xs);
    opacity: 0.7;
  }
  textarea.modern-input-group__input {
    min-height: 150px;
    resize: vertical;
  }
  textarea.modern-input-group__input ~ .modern-input-group__label {
    top: var(--space-lg);
    transform: none;
  }
  textarea.modern-input-group__input:focus ~ .modern-input-group__label,
  textarea.modern-input-group__input:not(:placeholder-shown) ~ .modern-input-group__label {
    top: 6px;
    font-size: var(--text-xs);
  }

  .modern-contact-form__submit {
    padding: var(--space-md) var(--space-3xl);
    background: var(--color-button, #000);
    color: var(--color-button-text, #fff);
    border: none;
    border-radius: var(--radius-md);
    font-size: var(--text-base);
    font-weight: 600;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    transition: all var(--duration-fast) var(--ease-out);
    justify-self: start;
    font-family: inherit;
  }
  .modern-contact-form__submit:hover { opacity: 0.9; transform: translateY(-1px); }

  /* Info Cards */
  .modern-contact-info {
    display: grid;
    gap: var(--space-lg);
  }
  .modern-contact-info__card {
    display: flex;
    align-items: flex-start;
    gap: var(--space-lg);
    padding: var(--space-xl);
    background: rgba(128,128,128,0.04);
    border-radius: var(--radius-lg);
    transition: all var(--duration-fast) var(--ease-out);
  }
  .modern-contact-info__card:hover {
    background: rgba(128,128,128,0.08);
    transform: translateY(-2px);
  }
  .modern-contact-info__icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-lg);
    background: var(--color-button, #000);
    color: var(--color-button-text, #fff);
    flex-shrink: 0;
  }
  .modern-contact-info__icon svg { width: 22px; height: 22px; }
  .modern-contact-info__title {
    font-size: var(--text-base);
    font-weight: 600;
    margin: 0 0 var(--space-2xs);
  }
  .modern-contact-info__text {
    font-size: var(--text-sm);
    opacity: 0.6;
    margin: 0;
    line-height: var(--leading-relaxed);
  }

  /* Social Links */
  .modern-contact-social {
    display: flex;
    gap: var(--space-md);
    margin-top: var(--space-xl);
  }
  .modern-contact-social a {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: rgba(128,128,128,0.08);
    color: inherit;
    transition: all var(--duration-fast) var(--ease-out);
  }
  .modern-contact-social a:hover {
    background: var(--color-button, #000);
    color: var(--color-button-text, #fff);
    transform: translateY(-2px);
  }
  .modern-contact-social a svg { width: 18px; height: 18px; }
{%- endstyle -%}

<div class="color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width section-{{ section.id }}-padding">
    <div class="modern-contact">
      {%- comment -%} Form {%- endcomment -%}
      <div class="modern-contact__form-section modern-animate animate--fade-right">
        <h2>{{ section.settings.heading | default: 'Send Us a Message' }}</h2>

        {%- form 'contact', class: 'modern-contact-form' -%}
          {%- if form.posted_successfully? -%}
            <div style="padding:var(--space-lg);background:rgba(34,197,94,0.1);border-radius:var(--radius-md);color:#22c55e;font-weight:600">
              Thanks for contacting us! We'll get back to you as soon as possible.
            </div>
          {%- endif -%}

          {%- if form.errors -%}
            <div style="padding:var(--space-lg);background:rgba(239,68,68,0.1);border-radius:var(--radius-md);color:#ef4444">
              {{ form.errors | default_errors }}
            </div>
          {%- endif -%}

          <div class="modern-contact-form__row modern-contact-form__row--half">
            <div class="modern-input-group">
              <input type="text" name="contact[name]" id="ContactName" class="modern-input-group__input" placeholder=" " required value="{{ form.name }}">
              <label for="ContactName" class="modern-input-group__label">Your Name</label>
            </div>
            <div class="modern-input-group">
              <input type="email" name="contact[email]" id="ContactEmail" class="modern-input-group__input" placeholder=" " required value="{{ form.email }}">
              <label for="ContactEmail" class="modern-input-group__label">Email Address</label>
            </div>
          </div>

          <div class="modern-input-group">
            <input type="text" name="contact[phone]" id="ContactPhone" class="modern-input-group__input" placeholder=" " value="{{ form.phone }}">
            <label for="ContactPhone" class="modern-input-group__label">Phone (optional)</label>
          </div>

          <div class="modern-input-group">
            <textarea name="contact[body]" id="ContactBody" class="modern-input-group__input" placeholder=" " required>{{ form.body }}</textarea>
            <label for="ContactBody" class="modern-input-group__label">Your Message</label>
          </div>

          <button type="submit" class="modern-contact-form__submit modern-btn">
            Send Message
          </button>
        {%- endform -%}
      </div>

      {%- comment -%} Info Cards {%- endcomment -%}
      <div class="modern-contact-info modern-animate animate--fade-left">
        {%- for block in section.blocks -%}
          {%- if block.type == 'contact_info' -%}
            <div class="modern-contact-info__card" {{ block.shopify_attributes }}>
              <div class="modern-contact-info__icon">
                {%- case block.settings.icon -%}
                  {%- when 'email' -%}
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                  {%- when 'phone' -%}
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                  {%- when 'location' -%}
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                  {%- when 'clock' -%}
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  {%- else -%}
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                {%- endcase -%}
              </div>
              <div>
                <h3 class="modern-contact-info__title">{{ block.settings.title | escape }}</h3>
                <p class="modern-contact-info__text">{{ block.settings.text }}</p>
              </div>
            </div>
          {%- endif -%}
        {%- endfor -%}

        {%- if section.settings.show_social_links -%}
          <div class="modern-contact-social">
            {%- if settings.social_facebook_link != blank -%}
              <a href="{{ settings.social_facebook_link }}" target="_blank" rel="noopener" aria-label="Facebook">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg>
              </a>
            {%- endif -%}
            {%- if settings.social_instagram_link != blank -%}
              <a href="{{ settings.social_instagram_link }}" target="_blank" rel="noopener" aria-label="Instagram">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="5"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/><circle cx="17.5" cy="6.5" r="1.5"/></svg>
              </a>
            {%- endif -%}
            {%- if settings.social_twitter_link != blank -%}
              <a href="{{ settings.social_twitter_link }}" target="_blank" rel="noopener" aria-label="Twitter">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/></svg>
              </a>
            {%- endif -%}
            {%- if settings.social_youtube_link != blank -%}
              <a href="{{ settings.social_youtube_link }}" target="_blank" rel="noopener" aria-label="YouTube">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M22.54 6.42a2.78 2.78 0 00-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 00-1.94 2A29 29 0 001 11.75a29 29 0 00.46 5.33A2.78 2.78 0 003.4 19.1c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 001.94-2 29 29 0 00.46-5.25 29 29 0 00-.46-5.43z"/><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02" fill="#fff"/></svg>
              </a>
            {%- endif -%}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Modern Contact Form",
  "tag": "section",
  "class": "section-modern-contact-form",
  "blocks": [
    {
      "type": "contact_info",
      "name": "Contact Info Card",
      "limit": 6,
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            { "value": "email", "label": "Email" },
            { "value": "phone", "label": "Phone" },
            { "value": "location", "label": "Location" },
            { "value": "clock", "label": "Clock" },
            { "value": "info", "label": "Info" }
          ],
          "default": "email"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Email Us"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>hello@yourstore.com</p>"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Send Us a Message"
    },
    {
      "type": "checkbox",
      "id": "show_social_links",
      "default": true,
      "label": "Show social media links"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "background-1"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 52,
      "unit": "px",
      "label": "Padding top"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 52,
      "unit": "px",
      "label": "Padding bottom"
    }
  ],
  "presets": [
    {
      "name": "Modern Contact Form",
      "blocks": [
        { "type": "contact_info", "settings": { "icon": "email", "title": "Email Us", "text": "<p>hello@yourstore.com</p>" } },
        { "type": "contact_info", "settings": { "icon": "phone", "title": "Call Us", "text": "<p>+1 (555) 123-4567</p>" } },
        { "type": "contact_info", "settings": { "icon": "location", "title": "Visit Us", "text": "<p>123 Store Street, City</p>" } }
      ]
    }
  ]
}
{% endschema %}
