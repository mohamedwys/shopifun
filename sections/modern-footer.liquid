{%- comment -%}
  Modern Footer Section
  =====================
  Clean, modern footer with brand info, link columns, social icons,
  newsletter signup, and copyright. Fully responsive with dark mode support.
{%- endcomment -%}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

{%- liquid
  assign has_social = false
  if settings.social_facebook_link != blank or settings.social_instagram_link != blank or settings.social_youtube_link != blank or settings.social_tiktok_link != blank or settings.social_twitter_link != blank or settings.social_pinterest_link != blank
    assign has_social = true
  endif
-%}

<footer class="modern-footer color-{{ section.settings.color_scheme }} gradient section-{{ section.id }}-padding">
  <div class="page-width">
    {%- comment -%} Newsletter banner at top {%- endcomment -%}
    {%- if section.settings.enable_newsletter -%}
      <div class="modern-newsletter modern-animate animate--fade-up" style="background:rgba(var(--color-foreground),0.04);margin-bottom:var(--space-3xl)">
        <h3 class="modern-newsletter__title">{{ section.settings.newsletter_heading | default: 'Stay in the loop' }}</h3>
        <p class="modern-newsletter__description">{{ section.settings.newsletter_description | default: 'Subscribe for exclusive offers and new arrivals.' }}</p>
        {%- form 'customer', id: 'ModernFooterNewsletter' -%}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="modern-newsletter__form">
            <input
              type="email"
              name="contact[email]"
              class="modern-newsletter__input"
              placeholder="{{ 'newsletter.label' | t | default: 'Email address' }}"
              required
              autocomplete="email"
              aria-label="{{ 'newsletter.label' | t | default: 'Email address' }}"
            >
            <button type="submit" class="modern-btn modern-btn--primary">
              {{ 'newsletter.button_label' | t | default: 'Subscribe' }}
            </button>
          </div>
        {%- endform -%}
      </div>
    {%- endif -%}

    {%- comment -%} Footer grid {%- endcomment -%}
    <div class="modern-footer__grid">
      {%- comment -%} Brand column {%- endcomment -%}
      <div class="modern-animate animate--fade-up">
        <div class="modern-header__logo" style="margin-bottom:var(--space-sm)">
          {%- if settings.logo != blank -%}
            {{ settings.logo | image_url: width: 200 | image_tag:
              alt: shop.name,
              widths: '100, 150, 200',
              loading: 'lazy',
              style: 'max-width:120px;height:auto'
            }}
          {%- else -%}
            <span style="font-size:var(--text-xl);font-weight:800;letter-spacing:var(--tracking-tight)">{{ shop.name }}</span>
          {%- endif -%}
        </div>
        {%- if section.settings.brand_description != blank -%}
          <p class="modern-footer__brand-description">{{ section.settings.brand_description }}</p>
        {%- endif -%}

        {%- if has_social -%}
          <div class="modern-footer__social" style="margin-top:var(--space-lg)">
            {%- if settings.social_facebook_link != blank -%}
              <a href="{{ settings.social_facebook_link }}" class="modern-footer__social-link" aria-label="Facebook" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
              </a>
            {%- endif -%}
            {%- if settings.social_instagram_link != blank -%}
              <a href="{{ settings.social_instagram_link }}" class="modern-footer__social-link" aria-label="Instagram" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>
              </a>
            {%- endif -%}
            {%- if settings.social_twitter_link != blank -%}
              <a href="{{ settings.social_twitter_link }}" class="modern-footer__social-link" aria-label="Twitter" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
              </a>
            {%- endif -%}
            {%- if settings.social_youtube_link != blank -%}
              <a href="{{ settings.social_youtube_link }}" class="modern-footer__social-link" aria-label="YouTube" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
              </a>
            {%- endif -%}
            {%- if settings.social_tiktok_link != blank -%}
              <a href="{{ settings.social_tiktok_link }}" class="modern-footer__social-link" aria-label="TikTok" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1-2.89-2.89 2.89 2.89 0 0 1 2.89-2.89c.28 0 .54.04.79.1v-3.5a6.37 6.37 0 0 0-.79-.05A6.34 6.34 0 0 0 3.15 15a6.34 6.34 0 0 0 6.34 6.34 6.34 6.34 0 0 0 6.34-6.34V8.8a8.24 8.24 0 0 0 4.85 1.56V6.91a4.82 4.82 0 0 1-1.09-.22z"/></svg>
              </a>
            {%- endif -%}
            {%- if settings.social_pinterest_link != blank -%}
              <a href="{{ settings.social_pinterest_link }}" class="modern-footer__social-link" aria-label="Pinterest" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.372 0 12c0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738a.36.36 0 0 1 .083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.632-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24 12 24c6.627 0 12-5.373 12-12 0-6.628-5.373-12-12-12z"/></svg>
              </a>
            {%- endif -%}
          </div>
        {%- endif -%}
      </div>

      {%- comment -%} Link columns from blocks {%- endcomment -%}
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'link_list' -%}
            <div class="modern-animate animate--fade-up" data-stagger="{{ forloop.index | plus: 1 | at_most: 8 }}" {{ block.shopify_attributes }}>
              {%- if block.settings.heading != blank -%}
                <h4 class="modern-footer__heading">{{ block.settings.heading | escape }}</h4>
              {%- endif -%}
              {%- if block.settings.menu != blank -%}
                <ul class="modern-footer__links">
                  {%- for link in block.settings.menu.links -%}
                    <li>
                      <a href="{{ link.url }}" class="modern-footer__link">{{ link.title | escape }}</a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- endif -%}
            </div>
          {%- when 'text' -%}
            <div class="modern-animate animate--fade-up" data-stagger="{{ forloop.index | plus: 1 | at_most: 8 }}" {{ block.shopify_attributes }}>
              {%- if block.settings.heading != blank -%}
                <h4 class="modern-footer__heading">{{ block.settings.heading | escape }}</h4>
              {%- endif -%}
              {%- if block.settings.text != blank -%}
                <div style="font-size:var(--text-sm);opacity:0.65;line-height:var(--leading-relaxed)">
                  {{ block.settings.text }}
                </div>
              {%- endif -%}
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>

    {%- comment -%} Footer bottom {%- endcomment -%}
    <div class="modern-footer__bottom modern-animate animate--fade-in">
      <p style="font-size:var(--text-xs);opacity:0.5;margin:0">
        &copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. {{ 'sections.footer.all_rights_reserved' | t | default: 'All rights reserved.' }}
      </p>

      {%- if section.settings.show_payment_icons -%}
        <div style="display:flex;gap:var(--space-xs);align-items:center;opacity:0.5">
          {%- for type in shop.enabled_payment_types -%}
            {{ type | payment_type_svg_tag: class: 'icon icon--full-color' }}
          {%- endfor -%}
        </div>
      {%- endif -%}

      {%- if section.settings.show_country_selector and localization.available_countries.size > 1 -%}
        {%- render 'country-localization' -%}
      {%- endif -%}

      {%- if section.settings.show_language_selector and localization.available_languages.size > 1 -%}
        {%- render 'language-localization' -%}
      {%- endif -%}
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "Modern Footer",
  "tag": "section",
  "class": "section-modern-footer",
  "settings": [
    {
      "type": "header",
      "content": "Brand"
    },
    {
      "type": "textarea",
      "id": "brand_description",
      "label": "Brand description",
      "default": "We create premium products with care and attention to detail."
    },
    {
      "type": "header",
      "content": "Newsletter"
    },
    {
      "type": "checkbox",
      "id": "enable_newsletter",
      "default": true,
      "label": "Enable newsletter signup"
    },
    {
      "type": "text",
      "id": "newsletter_heading",
      "label": "Newsletter heading",
      "default": "Stay in the loop"
    },
    {
      "type": "textarea",
      "id": "newsletter_description",
      "label": "Newsletter description",
      "default": "Subscribe for exclusive offers, new arrivals, and insider updates."
    },
    {
      "type": "header",
      "content": "Display"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "background-1"
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "default": true,
      "label": "Show payment icons"
    },
    {
      "type": "checkbox",
      "id": "show_country_selector",
      "default": false,
      "label": "Show country selector"
    },
    {
      "type": "checkbox",
      "id": "show_language_selector",
      "default": false,
      "label": "Show language selector"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 60,
      "unit": "px",
      "label": "Padding top"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 24,
      "unit": "px",
      "label": "Padding bottom"
    }
  ],
  "blocks": [
    {
      "type": "link_list",
      "name": "Link List",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Quick Links"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu"
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text"
        }
      ]
    }
  ],
  "max_blocks": 4,
  "presets": [
    {
      "name": "Modern Footer",
      "blocks": [
        {
          "type": "link_list",
          "settings": {
            "heading": "Shop"
          }
        },
        {
          "type": "link_list",
          "settings": {
            "heading": "Support"
          }
        },
        {
          "type": "link_list",
          "settings": {
            "heading": "Company"
          }
        }
      ]
    }
  ]
}
{% endschema %}
